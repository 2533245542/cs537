\hypertarget{sh_8c}{\section{user/sh.c File Reference}
\label{sh_8c}\index{user/sh.\-c@{user/sh.\-c}}
}
{\ttfamily \#include \char`\"{}types.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}user.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}fcntl.\-h\char`\"{}}\\*
Include dependency graph for sh.\-c\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=253pt]{sh_8c__incl}
\end{center}
\end{figure}
\subsection*{Data Structures}
\begin{DoxyCompactItemize}
\item 
struct \hyperlink{structcmd}{cmd}
\item 
struct \hyperlink{structexeccmd}{execcmd}
\item 
struct \hyperlink{structredircmd}{redircmd}
\item 
struct \hyperlink{structpipecmd}{pipecmd}
\item 
struct \hyperlink{structlistcmd}{listcmd}
\item 
struct \hyperlink{structbackcmd}{backcmd}
\end{DoxyCompactItemize}
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \hyperlink{sh_8c_a7d636ac897898fcd988797e4ada044b9}{E\-X\-E\-C}~1
\item 
\#define \hyperlink{sh_8c_ae1749b6682612a761fc83e79c38386b1}{R\-E\-D\-I\-R}~2
\item 
\#define \hyperlink{sh_8c_a67bc87cdcc5724cf8e8e4ae278d0133f}{P\-I\-P\-E}~3
\item 
\#define \hyperlink{sh_8c_aed0a8f83088c41d721066cd5b3b9a00c}{L\-I\-S\-T}~4
\item 
\#define \hyperlink{sh_8c_ab303ee384877c80cb8855bf0113faf88}{B\-A\-C\-K}~5
\item 
\#define \hyperlink{sh_8c_a41101847771d39a4f0a7f9395061c629}{M\-A\-X\-A\-R\-G\-S}~10
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
int \hyperlink{sh_8c_a7ae98824a008ffbc5506060227b6faa0}{fork1} (void)
\item 
void \hyperlink{sh_8c_ada38fdb2913f040f6eeb6189eeb42d32}{panic} (char $\ast$)
\item 
struct \hyperlink{structcmd}{cmd} $\ast$ \hyperlink{sh_8c_ab08793db282d79295235e593dc4cac82}{parsecmd} (char $\ast$)
\item 
void \hyperlink{sh_8c_aedbeff6afe5d4e22330c7e6b5e6df893}{runcmd} (struct \hyperlink{structcmd}{cmd} $\ast$\hyperlink{structcmd}{cmd})
\item 
int \hyperlink{sh_8c_a0ee5a9418fea2f92036f5367a4101fe8}{getcmd} (char $\ast$\hyperlink{structbuf}{buf}, int nbuf)
\item 
int \hyperlink{sh_8c_a840291bc02cba5474a4cb46a9b9566fe}{main} (void)
\item 
struct \hyperlink{structcmd}{cmd} $\ast$ \hyperlink{sh_8c_a9fe29da0f831645fb645dca0df0fa6e0}{execcmd} (void)
\item 
struct \hyperlink{structcmd}{cmd} $\ast$ \hyperlink{sh_8c_ad6b34af843c5bc556aac1ad33d1e4517}{redircmd} (struct \hyperlink{structcmd}{cmd} $\ast$subcmd, char $\ast$\hyperlink{structfile}{file}, char $\ast$efile, int mode, int fd)
\item 
struct \hyperlink{structcmd}{cmd} $\ast$ \hyperlink{sh_8c_ac84beaa7dea2b72c5b2115aee36e3f9d}{pipecmd} (struct \hyperlink{structcmd}{cmd} $\ast$left, struct \hyperlink{structcmd}{cmd} $\ast$right)
\item 
struct \hyperlink{structcmd}{cmd} $\ast$ \hyperlink{sh_8c_a7baebb9c63e5150e27491823db9d1cdb}{listcmd} (struct \hyperlink{structcmd}{cmd} $\ast$left, struct \hyperlink{structcmd}{cmd} $\ast$right)
\item 
struct \hyperlink{structcmd}{cmd} $\ast$ \hyperlink{sh_8c_a8f1212e0b392bac41dcc6ff160b5dcdb}{backcmd} (struct \hyperlink{structcmd}{cmd} $\ast$subcmd)
\item 
int \hyperlink{sh_8c_aaf1dedac6db801eab8d23f2acb3b1272}{gettoken} (char $\ast$$\ast$ps, char $\ast$es, char $\ast$$\ast$q, char $\ast$$\ast$eq)
\item 
int \hyperlink{sh_8c_ae0a03d29adb5d9fa678bd53e749f1546}{peek} (char $\ast$$\ast$ps, char $\ast$es, char $\ast$toks)
\item 
struct \hyperlink{structcmd}{cmd} $\ast$ \hyperlink{sh_8c_a4593dc7728db0ff4bb5fb29c31ab8cba}{parseline} (char $\ast$$\ast$, char $\ast$)
\item 
struct \hyperlink{structcmd}{cmd} $\ast$ \hyperlink{sh_8c_a4789e9e629e810d291c1dd5ece4d3a71}{parsepipe} (char $\ast$$\ast$, char $\ast$)
\item 
struct \hyperlink{structcmd}{cmd} $\ast$ \hyperlink{sh_8c_add82543cc6953d0173086d06bfcf76c7}{parseexec} (char $\ast$$\ast$, char $\ast$)
\item 
struct \hyperlink{structcmd}{cmd} $\ast$ \hyperlink{sh_8c_a116fd6ef63a4f3a15340502d15ec1ce1}{nulterminate} (struct \hyperlink{structcmd}{cmd} $\ast$)
\item 
struct \hyperlink{structcmd}{cmd} $\ast$ \hyperlink{sh_8c_a1b8582f6a43b9f8874aae78e44a4a448}{parseredirs} (struct \hyperlink{structcmd}{cmd} $\ast$\hyperlink{structcmd}{cmd}, char $\ast$$\ast$ps, char $\ast$es)
\item 
struct \hyperlink{structcmd}{cmd} $\ast$ \hyperlink{sh_8c_a99d0a6cc8bd52b455b635ed26e4f149a}{parseblock} (char $\ast$$\ast$ps, char $\ast$es)
\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
char \hyperlink{sh_8c_ab8474337bbc7c7d316b75b5c00d79947}{whitespace} \mbox{[}$\,$\mbox{]} = \char`\"{} \textbackslash{}t\textbackslash{}r\textbackslash{}n\textbackslash{}v\char`\"{}
\item 
char \hyperlink{sh_8c_ab385d981fc73a48a1b732173200f46e5}{symbols} \mbox{[}$\,$\mbox{]} = \char`\"{}$<$$\vert$$>$\&;()\char`\"{}
\end{DoxyCompactItemize}


\subsection{Macro Definition Documentation}
\hypertarget{sh_8c_ab303ee384877c80cb8855bf0113faf88}{\index{sh.\-c@{sh.\-c}!B\-A\-C\-K@{B\-A\-C\-K}}
\index{B\-A\-C\-K@{B\-A\-C\-K}!sh.c@{sh.\-c}}
\subsubsection[{B\-A\-C\-K}]{\setlength{\rightskip}{0pt plus 5cm}\#define B\-A\-C\-K~5}}\label{sh_8c_ab303ee384877c80cb8855bf0113faf88}


Definition at line 12 of file sh.\-c.

\hypertarget{sh_8c_a7d636ac897898fcd988797e4ada044b9}{\index{sh.\-c@{sh.\-c}!E\-X\-E\-C@{E\-X\-E\-C}}
\index{E\-X\-E\-C@{E\-X\-E\-C}!sh.c@{sh.\-c}}
\subsubsection[{E\-X\-E\-C}]{\setlength{\rightskip}{0pt plus 5cm}\#define E\-X\-E\-C~1}}\label{sh_8c_a7d636ac897898fcd988797e4ada044b9}


Definition at line 8 of file sh.\-c.

\hypertarget{sh_8c_aed0a8f83088c41d721066cd5b3b9a00c}{\index{sh.\-c@{sh.\-c}!L\-I\-S\-T@{L\-I\-S\-T}}
\index{L\-I\-S\-T@{L\-I\-S\-T}!sh.c@{sh.\-c}}
\subsubsection[{L\-I\-S\-T}]{\setlength{\rightskip}{0pt plus 5cm}\#define L\-I\-S\-T~4}}\label{sh_8c_aed0a8f83088c41d721066cd5b3b9a00c}


Definition at line 11 of file sh.\-c.

\hypertarget{sh_8c_a41101847771d39a4f0a7f9395061c629}{\index{sh.\-c@{sh.\-c}!M\-A\-X\-A\-R\-G\-S@{M\-A\-X\-A\-R\-G\-S}}
\index{M\-A\-X\-A\-R\-G\-S@{M\-A\-X\-A\-R\-G\-S}!sh.c@{sh.\-c}}
\subsubsection[{M\-A\-X\-A\-R\-G\-S}]{\setlength{\rightskip}{0pt plus 5cm}\#define M\-A\-X\-A\-R\-G\-S~10}}\label{sh_8c_a41101847771d39a4f0a7f9395061c629}


Definition at line 14 of file sh.\-c.

\hypertarget{sh_8c_a67bc87cdcc5724cf8e8e4ae278d0133f}{\index{sh.\-c@{sh.\-c}!P\-I\-P\-E@{P\-I\-P\-E}}
\index{P\-I\-P\-E@{P\-I\-P\-E}!sh.c@{sh.\-c}}
\subsubsection[{P\-I\-P\-E}]{\setlength{\rightskip}{0pt plus 5cm}\#define P\-I\-P\-E~3}}\label{sh_8c_a67bc87cdcc5724cf8e8e4ae278d0133f}


Definition at line 10 of file sh.\-c.

\hypertarget{sh_8c_ae1749b6682612a761fc83e79c38386b1}{\index{sh.\-c@{sh.\-c}!R\-E\-D\-I\-R@{R\-E\-D\-I\-R}}
\index{R\-E\-D\-I\-R@{R\-E\-D\-I\-R}!sh.c@{sh.\-c}}
\subsubsection[{R\-E\-D\-I\-R}]{\setlength{\rightskip}{0pt plus 5cm}\#define R\-E\-D\-I\-R~2}}\label{sh_8c_ae1749b6682612a761fc83e79c38386b1}


Definition at line 9 of file sh.\-c.



\subsection{Function Documentation}
\hypertarget{sh_8c_a8f1212e0b392bac41dcc6ff160b5dcdb}{\index{sh.\-c@{sh.\-c}!backcmd@{backcmd}}
\index{backcmd@{backcmd}!sh.c@{sh.\-c}}
\subsubsection[{backcmd}]{\setlength{\rightskip}{0pt plus 5cm}struct {\bf cmd}$\ast$ {\bf backcmd} (
\begin{DoxyParamCaption}
\item[{struct {\bf cmd} $\ast$}]{subcmd}
\end{DoxyParamCaption}
)}}\label{sh_8c_a8f1212e0b392bac41dcc6ff160b5dcdb}


Definition at line 249 of file sh.\-c.

\hypertarget{sh_8c_a9fe29da0f831645fb645dca0df0fa6e0}{\index{sh.\-c@{sh.\-c}!execcmd@{execcmd}}
\index{execcmd@{execcmd}!sh.c@{sh.\-c}}
\subsubsection[{execcmd}]{\setlength{\rightskip}{0pt plus 5cm}struct {\bf cmd}$\ast$ {\bf execcmd} (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}}\label{sh_8c_a9fe29da0f831645fb645dca0df0fa6e0}


Definition at line 196 of file sh.\-c.

\hypertarget{sh_8c_a7ae98824a008ffbc5506060227b6faa0}{\index{sh.\-c@{sh.\-c}!fork1@{fork1}}
\index{fork1@{fork1}!sh.c@{sh.\-c}}
\subsubsection[{fork1}]{\setlength{\rightskip}{0pt plus 5cm}int fork1 (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}}\label{sh_8c_a7ae98824a008ffbc5506060227b6faa0}


Definition at line 183 of file sh.\-c.

\hypertarget{sh_8c_a0ee5a9418fea2f92036f5367a4101fe8}{\index{sh.\-c@{sh.\-c}!getcmd@{getcmd}}
\index{getcmd@{getcmd}!sh.c@{sh.\-c}}
\subsubsection[{getcmd}]{\setlength{\rightskip}{0pt plus 5cm}int getcmd (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{buf, }
\item[{int}]{nbuf}
\end{DoxyParamCaption}
)}}\label{sh_8c_a0ee5a9418fea2f92036f5367a4101fe8}


Definition at line 134 of file sh.\-c.

\hypertarget{sh_8c_aaf1dedac6db801eab8d23f2acb3b1272}{\index{sh.\-c@{sh.\-c}!gettoken@{gettoken}}
\index{gettoken@{gettoken}!sh.c@{sh.\-c}}
\subsubsection[{gettoken}]{\setlength{\rightskip}{0pt plus 5cm}int gettoken (
\begin{DoxyParamCaption}
\item[{char $\ast$$\ast$}]{ps, }
\item[{char $\ast$}]{es, }
\item[{char $\ast$$\ast$}]{q, }
\item[{char $\ast$$\ast$}]{eq}
\end{DoxyParamCaption}
)}}\label{sh_8c_aaf1dedac6db801eab8d23f2acb3b1272}


Definition at line 265 of file sh.\-c.

\hypertarget{sh_8c_a7baebb9c63e5150e27491823db9d1cdb}{\index{sh.\-c@{sh.\-c}!listcmd@{listcmd}}
\index{listcmd@{listcmd}!sh.c@{sh.\-c}}
\subsubsection[{listcmd}]{\setlength{\rightskip}{0pt plus 5cm}struct {\bf cmd}$\ast$ {\bf listcmd} (
\begin{DoxyParamCaption}
\item[{struct {\bf cmd} $\ast$}]{left, }
\item[{struct {\bf cmd} $\ast$}]{right}
\end{DoxyParamCaption}
)}}\label{sh_8c_a7baebb9c63e5150e27491823db9d1cdb}


Definition at line 236 of file sh.\-c.

\hypertarget{sh_8c_a840291bc02cba5474a4cb46a9b9566fe}{\index{sh.\-c@{sh.\-c}!main@{main}}
\index{main@{main}!sh.c@{sh.\-c}}
\subsubsection[{main}]{\setlength{\rightskip}{0pt plus 5cm}int main (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}}\label{sh_8c_a840291bc02cba5474a4cb46a9b9566fe}


Definition at line 145 of file sh.\-c.

\hypertarget{sh_8c_a116fd6ef63a4f3a15340502d15ec1ce1}{\index{sh.\-c@{sh.\-c}!nulterminate@{nulterminate}}
\index{nulterminate@{nulterminate}!sh.c@{sh.\-c}}
\subsubsection[{nulterminate}]{\setlength{\rightskip}{0pt plus 5cm}struct {\bf cmd} $\ast$ nulterminate (
\begin{DoxyParamCaption}
\item[{struct {\bf cmd} $\ast$}]{cmd}
\end{DoxyParamCaption}
)}}\label{sh_8c_a116fd6ef63a4f3a15340502d15ec1ce1}


Definition at line 449 of file sh.\-c.

\hypertarget{sh_8c_ada38fdb2913f040f6eeb6189eeb42d32}{\index{sh.\-c@{sh.\-c}!panic@{panic}}
\index{panic@{panic}!sh.c@{sh.\-c}}
\subsubsection[{panic}]{\setlength{\rightskip}{0pt plus 5cm}void panic (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{s}
\end{DoxyParamCaption}
)}}\label{sh_8c_ada38fdb2913f040f6eeb6189eeb42d32}


Definition at line 176 of file sh.\-c.

\hypertarget{sh_8c_a99d0a6cc8bd52b455b635ed26e4f149a}{\index{sh.\-c@{sh.\-c}!parseblock@{parseblock}}
\index{parseblock@{parseblock}!sh.c@{sh.\-c}}
\subsubsection[{parseblock}]{\setlength{\rightskip}{0pt plus 5cm}struct {\bf cmd}$\ast$ parseblock (
\begin{DoxyParamCaption}
\item[{char $\ast$$\ast$}]{ps, }
\item[{char $\ast$}]{es}
\end{DoxyParamCaption}
)}}\label{sh_8c_a99d0a6cc8bd52b455b635ed26e4f149a}


Definition at line 399 of file sh.\-c.

\hypertarget{sh_8c_ab08793db282d79295235e593dc4cac82}{\index{sh.\-c@{sh.\-c}!parsecmd@{parsecmd}}
\index{parsecmd@{parsecmd}!sh.c@{sh.\-c}}
\subsubsection[{parsecmd}]{\setlength{\rightskip}{0pt plus 5cm}struct {\bf cmd} $\ast$ parsecmd (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{s}
\end{DoxyParamCaption}
)}}\label{sh_8c_ab08793db282d79295235e593dc4cac82}


Definition at line 327 of file sh.\-c.

\hypertarget{sh_8c_add82543cc6953d0173086d06bfcf76c7}{\index{sh.\-c@{sh.\-c}!parseexec@{parseexec}}
\index{parseexec@{parseexec}!sh.c@{sh.\-c}}
\subsubsection[{parseexec}]{\setlength{\rightskip}{0pt plus 5cm}struct {\bf cmd} $\ast$ parseexec (
\begin{DoxyParamCaption}
\item[{char $\ast$$\ast$}]{ps, }
\item[{char $\ast$}]{es}
\end{DoxyParamCaption}
)}}\label{sh_8c_add82543cc6953d0173086d06bfcf76c7}


Definition at line 415 of file sh.\-c.

\hypertarget{sh_8c_a4593dc7728db0ff4bb5fb29c31ab8cba}{\index{sh.\-c@{sh.\-c}!parseline@{parseline}}
\index{parseline@{parseline}!sh.c@{sh.\-c}}
\subsubsection[{parseline}]{\setlength{\rightskip}{0pt plus 5cm}struct {\bf cmd} $\ast$ parseline (
\begin{DoxyParamCaption}
\item[{char $\ast$$\ast$}]{ps, }
\item[{char $\ast$}]{es}
\end{DoxyParamCaption}
)}}\label{sh_8c_a4593dc7728db0ff4bb5fb29c31ab8cba}


Definition at line 344 of file sh.\-c.

\hypertarget{sh_8c_a4789e9e629e810d291c1dd5ece4d3a71}{\index{sh.\-c@{sh.\-c}!parsepipe@{parsepipe}}
\index{parsepipe@{parsepipe}!sh.c@{sh.\-c}}
\subsubsection[{parsepipe}]{\setlength{\rightskip}{0pt plus 5cm}struct {\bf cmd} $\ast$ parsepipe (
\begin{DoxyParamCaption}
\item[{char $\ast$$\ast$}]{ps, }
\item[{char $\ast$}]{es}
\end{DoxyParamCaption}
)}}\label{sh_8c_a4789e9e629e810d291c1dd5ece4d3a71}


Definition at line 361 of file sh.\-c.

\hypertarget{sh_8c_a1b8582f6a43b9f8874aae78e44a4a448}{\index{sh.\-c@{sh.\-c}!parseredirs@{parseredirs}}
\index{parseredirs@{parseredirs}!sh.c@{sh.\-c}}
\subsubsection[{parseredirs}]{\setlength{\rightskip}{0pt plus 5cm}struct {\bf cmd}$\ast$ parseredirs (
\begin{DoxyParamCaption}
\item[{struct {\bf cmd} $\ast$}]{cmd, }
\item[{char $\ast$$\ast$}]{ps, }
\item[{char $\ast$}]{es}
\end{DoxyParamCaption}
)}}\label{sh_8c_a1b8582f6a43b9f8874aae78e44a4a448}


Definition at line 374 of file sh.\-c.

\hypertarget{sh_8c_ae0a03d29adb5d9fa678bd53e749f1546}{\index{sh.\-c@{sh.\-c}!peek@{peek}}
\index{peek@{peek}!sh.c@{sh.\-c}}
\subsubsection[{peek}]{\setlength{\rightskip}{0pt plus 5cm}int peek (
\begin{DoxyParamCaption}
\item[{char $\ast$$\ast$}]{ps, }
\item[{char $\ast$}]{es, }
\item[{char $\ast$}]{toks}
\end{DoxyParamCaption}
)}}\label{sh_8c_ae0a03d29adb5d9fa678bd53e749f1546}


Definition at line 310 of file sh.\-c.

\hypertarget{sh_8c_ac84beaa7dea2b72c5b2115aee36e3f9d}{\index{sh.\-c@{sh.\-c}!pipecmd@{pipecmd}}
\index{pipecmd@{pipecmd}!sh.c@{sh.\-c}}
\subsubsection[{pipecmd}]{\setlength{\rightskip}{0pt plus 5cm}struct {\bf cmd}$\ast$ {\bf pipecmd} (
\begin{DoxyParamCaption}
\item[{struct {\bf cmd} $\ast$}]{left, }
\item[{struct {\bf cmd} $\ast$}]{right}
\end{DoxyParamCaption}
)}}\label{sh_8c_ac84beaa7dea2b72c5b2115aee36e3f9d}


Definition at line 223 of file sh.\-c.

\hypertarget{sh_8c_ad6b34af843c5bc556aac1ad33d1e4517}{\index{sh.\-c@{sh.\-c}!redircmd@{redircmd}}
\index{redircmd@{redircmd}!sh.c@{sh.\-c}}
\subsubsection[{redircmd}]{\setlength{\rightskip}{0pt plus 5cm}struct {\bf cmd}$\ast$ {\bf redircmd} (
\begin{DoxyParamCaption}
\item[{struct {\bf cmd} $\ast$}]{subcmd, }
\item[{char $\ast$}]{file, }
\item[{char $\ast$}]{efile, }
\item[{int}]{mode, }
\item[{int}]{fd}
\end{DoxyParamCaption}
)}}\label{sh_8c_ad6b34af843c5bc556aac1ad33d1e4517}


Definition at line 207 of file sh.\-c.

\hypertarget{sh_8c_aedbeff6afe5d4e22330c7e6b5e6df893}{\index{sh.\-c@{sh.\-c}!runcmd@{runcmd}}
\index{runcmd@{runcmd}!sh.c@{sh.\-c}}
\subsubsection[{runcmd}]{\setlength{\rightskip}{0pt plus 5cm}void runcmd (
\begin{DoxyParamCaption}
\item[{struct {\bf cmd} $\ast$}]{cmd}
\end{DoxyParamCaption}
)}}\label{sh_8c_aedbeff6afe5d4e22330c7e6b5e6df893}


Definition at line 58 of file sh.\-c.



\subsection{Variable Documentation}
\hypertarget{sh_8c_ab385d981fc73a48a1b732173200f46e5}{\index{sh.\-c@{sh.\-c}!symbols@{symbols}}
\index{symbols@{symbols}!sh.c@{sh.\-c}}
\subsubsection[{symbols}]{\setlength{\rightskip}{0pt plus 5cm}char symbols\mbox{[}$\,$\mbox{]} = \char`\"{}$<$$\vert$$>$\&;()\char`\"{}}}\label{sh_8c_ab385d981fc73a48a1b732173200f46e5}


Definition at line 262 of file sh.\-c.

\hypertarget{sh_8c_ab8474337bbc7c7d316b75b5c00d79947}{\index{sh.\-c@{sh.\-c}!whitespace@{whitespace}}
\index{whitespace@{whitespace}!sh.c@{sh.\-c}}
\subsubsection[{whitespace}]{\setlength{\rightskip}{0pt plus 5cm}char whitespace\mbox{[}$\,$\mbox{]} = \char`\"{} \textbackslash{}t\textbackslash{}r\textbackslash{}n\textbackslash{}v\char`\"{}}}\label{sh_8c_ab8474337bbc7c7d316b75b5c00d79947}


Definition at line 261 of file sh.\-c.

